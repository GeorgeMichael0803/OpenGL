#version 330 core

in vec2 retTexCoords;          // Texture coordinates for the current fragment
out vec4 FragColor;            // Output fragment color

uniform sampler2D screenTexture;
uniform float frequency;       // Frequency of the wave
uniform float amplitude;       // Amplitude of the wave
uniform float time;            // Time variable passed from GameController
uniform int wireframe;         // Wireframe toggle
uniform int tintBlue;          // Tint blue toggle

void main()
{
    vec2 newTexCoords = retTexCoords;

    // Calculate sine wave based on X-axis, frequency, and time
    float sineWave = sin(retTexCoords.x * frequency + time) * amplitude;

    // Apply sine wave offset to the texture coordinates
    newTexCoords = retTexCoords + vec2(sineWave, sineWave);

    // Sample the color from the transformed texture coordinates
    vec4 color = texture(screenTexture, newTexCoords);

    // Apply blue tint if enabled
    if (tintBlue == 1) {
        color.r /= 2.0; // Reduce red channel
        color.g /= 2.0; // Reduce green channel
    }

    // Darken color for wireframe mode
    if (wireframe == 1) {
        color.rgb *= 0.5; // Simulate wireframe appearance
    }

    FragColor = color; // Output final color
}
